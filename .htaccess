# Cache busting and version control for GitHub Pages
# Force browsers to check for updates

# Disable caching for HTML files to ensure latest content
<Files "*.html">
    Header set Cache-Control "no-cache, no-store, must-revalidate"
    Header set Pragma "no-cache"
    Header set Expires 0
</Files>

# Short cache for CSS and JS with versioning
<Files "*.css">
    Header set Cache-Control "public, max-age=300"
</Files>

<Files "*.js">
    Header set Cache-Control "public, max-age=300"
</Files>

# Optimized cache for images with compression hints
<Files "*.png">
    Header set Cache-Control "public, max-age=604800, immutable"
    Header set Accept-Ranges "bytes"
    # Image optimization hints
    Header set Vary "Accept"
</Files>

<Files "*.jpg">
    Header set Cache-Control "public, max-age=604800, immutable"
    Header set Accept-Ranges "bytes"
    Header set Vary "Accept"
</Files>

<Files "*.jpeg">
    Header set Cache-Control "public, max-age=604800, immutable"
    Header set Accept-Ranges "bytes"
    Header set Vary "Accept"
</Files>

<Files "*.webp">
    Header set Cache-Control "public, max-age=604800, immutable"
    Header set Accept-Ranges "bytes"
    Header set Vary "Accept"
</Files>

<Files "*.gif">
    Header set Cache-Control "public, max-age=604800, immutable"
    Header set Accept-Ranges "bytes"
</Files>

# Force HTTPS (if supported by hosting)
RewriteEngine On
RewriteCond %{HTTPS} off
RewriteRule ^(.*)$ https://%{HTTP_HOST}%{REQUEST_URI} [L,R=301]

# Enable compression for better performance
<IfModule mod_deflate.c>
    AddOutputFilterByType DEFLATE text/plain
    AddOutputFilterByType DEFLATE text/html
    AddOutputFilterByType DEFLATE text/xml
    AddOutputFilterByType DEFLATE text/css
    AddOutputFilterByType DEFLATE application/xml
    AddOutputFilterByType DEFLATE application/xhtml+xml
    AddOutputFilterByType DEFLATE application/rss+xml
    AddOutputFilterByType DEFLATE application/javascript
    AddOutputFilterByType DEFLATE application/x-javascript
</IfModule>